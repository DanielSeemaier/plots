\documentclass{article}

\usepackage{lipsum}

\input{preamble.tex}

\usepackage{tikz}
\usetikzlibrary{external}
\tikzexternalize[prefix=figures/cache/]

\begin{document}

\lipsum[1-2]

\begin{figure}[t]
    \centering
    \input{figures/performance_profile.example.tex}
    \caption{Some performance profile.}
    \label{fig:some_performance_profile}
\end{figure}

\lipsum[2-3]

\begin{figure}[t]
    \centering
    \input{figures/combined_plot.example.tex}
    \input{figures/combined_plot.legend.example.tex}
    \caption{A figure with multiple plots side-by-side sharing a single legend.}
    \label{fig:combined}
\end{figure}

\end{document}
